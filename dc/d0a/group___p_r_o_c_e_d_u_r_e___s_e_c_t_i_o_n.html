<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>GMACS: tpl FUNCTIONS</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">GMACS
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">Length structured assessment model for crustaceans</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>SECTION</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('dc/d0a/group___p_r_o_c_e_d_u_r_e___s_e_c_t_i_o_n.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">tpl FUNCTIONS</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga4696487a9a9145c7e20085e62003912c"><td class="memItemLeft" align="right" valign="top">FUNCTION calc_total_mortality <a class="el" href="../../d1/da0/classint.html">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d0a/group___p_r_o_c_e_d_u_r_e___s_e_c_t_i_o_n.html#ga4696487a9a9145c7e20085e62003912c">h</a></td></tr>
<tr class="memdesc:ga4696487a9a9145c7e20085e62003912c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate total instantaneous mortality rate and survival rate.  <a href="#ga4696487a9a9145c7e20085e62003912c">More...</a><br /></td></tr>
<tr class="separator:ga4696487a9a9145c7e20085e62003912c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2951179386878d18a8cd5235175a028a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga2951179386878d18a8cd5235175a028a"></a>
FUNCTION update_population_numbers_at_length <a class="el" href="../../d1/da0/classint.html">int</a>&#160;</td><td class="memItemRight" valign="bottom"><b>i</b></td></tr>
<tr class="separator:ga2951179386878d18a8cd5235175a028a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5da3ac5a3d5d1c7c3b29eeaf21e30751"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga5da3ac5a3d5d1c7c3b29eeaf21e30751"></a>
FUNCTION update_population_numbers_at_length <a class="el" href="../../d1/da0/classint.html">int</a>&#160;</td><td class="memItemRight" valign="bottom"><b>ig</b></td></tr>
<tr class="separator:ga5da3ac5a3d5d1c7c3b29eeaf21e30751"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4b65f465d4ab5b1f5be6c54c5ef25750"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga4b65f465d4ab5b1f5be6c54c5ef25750"></a>
FUNCTION update_population_numbers_at_length <a class="el" href="../../d1/da0/classint.html">int</a>&#160;</td><td class="memItemRight" valign="bottom"><b>o</b></td></tr>
<tr class="separator:ga4b65f465d4ab5b1f5be6c54c5ef25750"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4667691cf7884e3bdc3f290d74f29893"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga4667691cf7884e3bdc3f290d74f29893"></a>
FUNCTION update_population_numbers_at_length <a class="el" href="../../d1/da0/classint.html">int</a>&#160;</td><td class="memItemRight" valign="bottom"><b>m</b></td></tr>
<tr class="separator:ga4667691cf7884e3bdc3f290d74f29893"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga898ca4172d7d92944a0212187d7f78b5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga898ca4172d7d92944a0212187d7f78b5"></a>
FUNCTION calc_predicted_catch <a class="el" href="../../d1/da0/classint.html">int</a>&#160;</td><td class="memItemRight" valign="bottom"><b>j</b></td></tr>
<tr class="separator:ga898ca4172d7d92944a0212187d7f78b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga67e6f5a0b1b262cfee4d93bb50ca367d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga67e6f5a0b1b262cfee4d93bb50ca367d"></a>
FUNCTION calc_predicted_catch <a class="el" href="../../d1/da0/classint.html">int</a>&#160;</td><td class="memItemRight" valign="bottom"><b>k</b></td></tr>
<tr class="separator:ga67e6f5a0b1b262cfee4d93bb50ca367d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>FUNCTIONS declared in the tpl PROCEDURE_SECTION. </p>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ga4696487a9a9145c7e20085e62003912c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FUNCTION calc_predicted_composition <a class="el" href="../../d1/da0/classint.html">int</a> h</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate total instantaneous mortality rate and survival rate. </p>
<p>Calculate predicted size composition data.</p>
<p>Calculate predicted catch for all years (not just data years)</p>
<p>Calculate predicted catch observations.</p>
<p>Update numbers-at-length.</p>
<p>\( S = exp(-Z) \) </p><dl class="section return"><dt>Returns</dt><dd>NULL</dd></dl>
<p>ISSUE, for some reason the diagonal of S goes to NAN if linear growth model is used. Due to F.</p>
<dl class="section author"><dt>Author</dt><dd>Team</dd></dl>
<p>Numbers at length are propagated each year for each sex based on the size transition matrix and a vector of size-specifc survival rates. The columns of the size-transition matrix are multiplied by the size-specific survival rate (a scalar). New recruits are added based on the estimated average recruitment and annual deviate, multiplied by a vector of size-proportions (rec_sdd).</p>
<p>The function uses the Baranov catch equation to predict the retained and discarded catch.</p>
<p>Assumptions: 1) retained (landed catch) is assume to be newshell male only. 2) discards are all females (new and old) and male only crab. 3) Natural and fishing mortality occur simultaneously. 4) discard is the total number of crab caught and discarded.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">[description]</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NULL</dd></dl>
<dl class="section author"><dt>Author</dt><dd>D'Arcy N. Webber</dd></dl>
<p>The function uses the Baranov catch equation to predict the retained and discarded catch for all model years (not just those years for which we have observations). This is used for plotting purposes only. </p><dl class="section return"><dt>Returns</dt><dd>NULL</dd></dl>
<p>Predicted size composition data are given in proportions. Size composition strata:</p><ul>
<li>sex (0 = both sexes, 1 = male, 2 = female)</li>
<li>type (0 = all catch, 1 = retained, 2 = discard)</li>
<li>shell condition (0 = all, 1 = new shell, 2 = oldshell)</li>
<li>mature or immature (0 = both, 1 = immature, 2 = mature)</li>
</ul>
<p>TODO:</p><ul>
<li>add pointers for shell type. DONE</li>
<li>add pointers for maturity state. DONE</li>
<li>need pointer for retained vs. discarded.</li>
</ul>
<p>Jan 5, 2015. Size compostion data can come in a number of forms. Given sex, maturity and 3 shell conditions, there are 12 possible combinations for adding up the numbers at length (nal). </p><pre class="fragment">                    Shell
</pre><p> Sex Maturity condition Description </p><hr/>
<p> Male 0 1 immature, new shell ! Male 0 2 immature, old shell ! Male 0 0 immature, new &amp; old shell 1 Male, immature, new shell Male 1 1 mature, new shell Male 1 2 mature, old shell Male 1 0 mature, new &amp; old shell Female 0 1 immature, new shell !Female 0 2 immature, old shell !Female 0 0 immature, new &amp; old shell Female 1 1 mature, new shell Female 1 2 mature, old shell Female 1 0 mature, new &amp; old shell </p><hr/>
<p>Call function to get the appropriate numbers-at-length.</p>
<p>TODO: [x] Check to ensure new shell old shell is working. [ ] Add maturity component for data sets with mature old and mature new. </p>

<p>Definition at line <a class="el" href="../../dd/da9/gmacs_8tpl_source.html#l00310">310</a> of file <a class="el" href="../../dd/da9/gmacs_8tpl_source.html">gmacs.tpl</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Aug 11 2015 10:07:52 for GMACS by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
